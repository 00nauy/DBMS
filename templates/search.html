<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>书籍列表</title>
    <link rel="stylesheet" href="../static/css/search.css">
    <link rel="stylesheet" href="../static/css/general.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>  
<body>  
    <div class="background-image"></div>
    
    <div class="overlay"></div>

    <div class="sidebar">
        <img src="../static/images/LOGO.png" alt="LOGO" class="logo">
        <img src="../static/images/LOGO_ABEX.png" alt="LOGO_ABEX" class="logo-abex">
        <a href="/index"><i class="fas fa-home"></i> 主页</a>
        <a href="/personal_info"><i class="fas fa-user"></i> 查询个人信息</a>
        <a href="/borrow_info"><i class="fas fa-book"></i> 查询借阅信息</a>
        <a href="/search"><i class="fas fa-search"></i> 借书</a>
        <a href="/reserve"><i class="fas fa-chair"></i> 预约座位</a>
        <a href="/reserve_info"><i class="fas fa-info-circle"></i> 查询预约信息</a>
    </div>

    <div class="body-content">   
        <form action="{{ url_for('search') }}" method="get">
            <input type="text" name="book" placeholder="搜索书名">
            <input type="text" name="author" placeholder="搜索作者名">
            <input type="text" name="class" placeholder="搜索关键词">
            <input type="submit" value="Search">
        </form>
        <div class="book-info"> 
            {% if searched %}
            {% if result %}
                <ul id="book-list">  
                    {% for item in result %}
                        <li>
                            书号：{{ item[0] }} 书名：{{ item[1] }} 类别：{{ item[2] }} 作者：{{ item[3] }} 出版社：{{ item[4] }} 出版时间：{{ item[5] }} 入库时间：{{ item[6] }}
                            <form action="/borrow2" method="get" class="book-action-form">  
                                <input type="hidden" name="book_id" value="{{ item[0] }}">  
                                {% if item[7] == 0 %}  
                                    <button type="submit" class="button">借阅</button>  
                                {% else %}  
                                    <span class="button disabled">已被借出</span>  
                                {% endif %}  
                            </form>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>未找到符合条件的书籍。</p>
            {% endif %}
            {% else %}
                <p>请输入搜索条件进行查询。</p>
            {% endif %}
        </div>
    </div>
</body>  
</html>
