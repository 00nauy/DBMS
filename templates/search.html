<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>书籍列表</title>
    <link rel="stylesheet" href="../static/css/search.css">
    <link rel="stylesheet" href="../static/css/general.css">
</head>  
<body>  
    <div class="background-image"></div>
    
    <div class="overlay"></div>

    <div class="sidebar">
        <img src="../static/images/LOGO.png" alt="LOGO" class="logo">
        <a href="/index">主页</a>
        <a href="/personal_info">查询个人信息</a>
        <a href="/borrow_info">查询借阅信息</a>
        <a href="/search">借书</a>
        <a href="/reserve">预约座位</a>
        <a href="/reserve_info">查询预约信息</a>
    </div>

    <div class="body-content">
        <div class="search-container">   
            <h2>图书借阅</h2>
            <form action="{{ url_for('search') }}" method="get">
                <input type="text" name="book" placeholder="搜索书名">
                <input type="text" name="author" placeholder="搜索作者名">
                <input type="text" name="class" placeholder="搜索关键词">
                <input type="submit" value="搜索">
            </form>
        </div>
        <div class="book-info"> 
            {% if searched %}
            {% if result %}
                <table id="book-list">
                    <thead>
                        <tr>
                            <th>书号</th>
                            <th>书名</th>
                            <th>类别</th>
                            <th>作者</th>
                            <th>出版社</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in result %}
                        <tr>
                            <td>{{ item[0] }}</td>
                            <td>{{ item[1] }}</td>
                            <td>{{ item[2] }}</td>
                            <td>{{ item[3] }}</td>
                            <td>{{ item[4] }}</td>
                            <td>
                                <form action="/borrow2" method="get" class="book-action-form">  
                                    <input type="hidden" name="book_id" value="{{ item[0] }}">  
                                    {% if item[7] == 0 %}  
                                        <button type="submit" class="button">借阅</button>  
                                    {% else %}  
                                        <span class="button disabled">已被借出</span>  
                                    {% endif %}  
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <p>未找到符合条件的书籍。</p>
            {% endif %}
            {% else %}
                <p>请输入搜索条件进行查询。</p>
            {% endif %}
        </div>
    </div>
</body>  
</html>
